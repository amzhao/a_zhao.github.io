---
title: "Plotly"
author: "Amelia Zhao"
date: "10/31/2019"
output: html_document
---

This dashboard examines the NYC Department of Health and Mental Hygiene (DOHMH) restaurant inspections up to October 2017. The source data, including updated data, can be found [here](https://dev.socrata.com/foundry/data.cityofnewyork.us/43nn-pn8j). 


The restaurants examined are on my personal list of restaurants that I would like to visit, but have not been to. It is a small sample of 11 different restaurants, including some chain restaurants with multiple locations. Luckily, none of these restaurants had any public health hazard violations!


```{r}
library(tidyverse)
library(p8105.datasets)
library(plotly)
data("rest_inspec")

fooddata <-
  rest_inspec %>% 
  filter(
    dba %in% c("HAKKASAN", "CHO DANG GOL", "WONDEE SIAM", "PICCOLA CUCINA", "ADRIENNE'S PIZZA BAR", "RIBALTA", "LOS TACOS NO.1", "SOPHIE'S CUBAN CUISINE", "KEENS STEAKHOUSE", "JONGRO BBQ", "L'AMICO/THE VINE"),
    !is.na(score)) 
    
fooddata %>% 
  plot_ly(y = ~score, color = ~cuisine_description, type = "box",
          colors = "Set2")

fooddata %>% 
  mutate(
    mean_score = mean(score),
    dba = fct_reorder(dba, mean_score)
  ) %>% 
  plot_ly(x = ~dba, y = ~mean_score, color = ~dba, type = "bar",
          colors = "Set2")

plot2 <-
  fooddata %>% 
  mutate(
    mean_score = mean(score),
    dba = fct_reorder(dba, n)
  ) %>% 
  plot_ly(x = ~dba, y = ~mean_score, color = ~dba, type = "bar",
          colors = "Set2")

plot_ly(fooddata, x = ~inspection_date, y = ~trace_1$mean_temp, name = 'Janurary', type = 'scatter', mode = 'lines') %>% 
  add_trace(y = ~trace_7$mean_temp, name = 'July', mode = 'lines+markers') %>% 
  layout(title = "Average Max Temperatures for January and July in New York")

```